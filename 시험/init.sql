-- 사용자 계정 생성
CREATE USER c##ONLINE IDENTIFIED BY ONLINE;
GRANT CONNECT, RESOURCE TO c##ONLINE;
ALTER USER C##ONLINE DEFAULT TABLESPACE USERS QUOTA UNLIMITED ON USERS;


CREATE TABLE TB_TEACHER(
    TEACHER_ID NUMBER PRIMARY KEY,
    NAME VARCHAR2(20),
    EMAIL VARCHAR2(30) UNIQUE,
    HIRE_DATE DATE,
    SUBJECT VARCHAR2(30)
);
COMMENT ON COLUMN TB_TEACHER.TEACHER_ID IS '강사 고유번호';
COMMENT ON COLUMN TB_TEACHER.NAME IS '강사 이름';
COMMENT ON COLUMN TB_TEACHER.EMAIL IS '이메일';
COMMENT ON COLUMN TB_TEACHER.HIRE_DATE IS '입사일';
COMMENT ON COLUMN TB_TEACHER.SUBJECT IS '전공 분야';
INSERT INTO TB_TEACHER
VALUES (101, '홍길동', 'ABC123@gmail.com', '01/05/24', '수학');
INSERT INTO TB_TEACHER
VALUES (102, '고길동', 'ABC124@gmail.com', '05/12/14', '영어');
INSERT INTO TB_TEACHER
VALUES (103, '박미수', 'ASD123@gmail.com', '87/10/13', '과학');
INSERT INTO TB_TEACHER
VALUES (104, '김지수', 'QWER1234@gmail.com', '98/03/01', '수학');
INSERT INTO TB_TEACHER
VALUES (105, '안지선', 'AVACZ@gmail.com', '01/03/24', '사회');

CREATE TABLE TB_LECTURE(
    LECTURE_ID NUMBER PRIMARY KEY,
    TITLE VARCHAR2(30),
    TEACHER_ID NUMBER,
    INDEX_COUNT NUMBER DEFAULT 0,
    CATEGORY VARCHAR2(30),
    START_DATE DATE,
    END_DATE DATE,
    CONSTRAINT LEC_LEC_FK FOREIGN KEY(TEACHER_ID) REFERENCES TB_TEACHER ON DELETE SET NULL
);
COMMENT ON COLUMN TB_LECTURE.LECTURE_ID IS '강의 고유번호';
COMMENT ON COLUMN TB_LECTURE.TITLE IS '강의 제목';
COMMENT ON COLUMN TB_LECTURE.TEACHER_ID IS '강의 담당 강사의 ID';
COMMENT ON COLUMN TB_LECTURE.INDEX_COUNT IS '수강인원';
COMMENT ON COLUMN TB_LECTURE.CATEGORY IS '강의 분류';
COMMENT ON COLUMN TB_LECTURE.START_DATE IS '강의 시작일';
COMMENT ON COLUMN TB_LECTURE.END_DATE IS '강의 종료일';

INSERT INTO TB_LECTURE
VALUES (201, '생활의 수학', '101', 20, '수학', '25/08/07', '26/03/27');
INSERT INTO TB_LECTURE
VALUES (202, '원어민 영어', '102', 25, '외국어', '25/08/15', '26/02/13');
INSERT INTO TB_LECTURE
VALUES (203, '우주과학', '103', 20, '과학', '25/05/20', '26/01/20');
INSERT INTO TB_LECTURE
VALUES (204, '대학 수학', '104', 15, '수학', '25/08/13', '26/02/17');
INSERT INTO TB_LECTURE
VALUES (205, '세상의 흐름', '105', 21, '사회', '25/02/07', '25/12/27');

CREATE TABLE TB_STUDENT(
    STUDENT_ID NUMBER PRIMARY KEY,
    NAME VARCHAR2(20),
    GRADE NUMBER,
    EMAIL VARCHAR(30),
    JOIN_DATE DATE
);
COMMENT ON COLUMN TB_STUDENT.STUDENT_ID IS '수강생 고유번호';
COMMENT ON COLUMN TB_STUDENT.NAME IS '수강생 이름';
COMMENT ON COLUMN TB_STUDENT.GRADE IS '수강 등급';
COMMENT ON COLUMN TB_STUDENT.EMAIL IS '수강생 이메일';
COMMENT ON COLUMN TB_STUDENT.JOIN_DATE IS '등록일';

INSERT INTO TB_STUDENT
VALUES (10, '박준언', 2, 'QPQPQP@gmail.com', '25/08/07');
INSERT INTO TB_STUDENT
VALUES (11, '김지민', 1, 'Qppqp@gmail.com', '25/03/17');
INSERT INTO TB_STUDENT
VALUES (12, '언준박', 1, 'papago@gmail.com', '25/01/30');
INSERT INTO TB_STUDENT
VALUES (13, '미진이', 4, 'tyui123@gmail.com', '24/12/07');
INSERT INTO TB_STUDENT
VALUES (14, '김미라', 3, 'poqwer@gmail.com', '25/04/07');
INSERT INTO TB_STUDENT
VALUES (15, '배민수', 3, '123wer@gmail.com', '25/06/07');
INSERT INTO TB_STUDENT
VALUES (16, '이길동', 3, '414qwer@gmail.com', '25/03/07');
INSERT INTO TB_STUDENT
VALUES (1001, '이기자', 3, '414qwer@gmail.com', '25/03/17');

CREATE TABLE TB_ENROLLMENT(
ENROLL_ID NUMBER PRIMARY KEY,
STUDENT_ID NUMBER,
LECTURE_ID NUMBER,
ENROLL_DATE DATE,
STATUS CHAR(1),
GRADE_SCORE NUMBER,
CONSTRAINT EN_STU_FK FOREIGN KEY(STUDENT_ID) REFERENCES TB_STUDENT ON DELETE SET NULL,
CONSTRAINT EN_LEC_FK FOREIGN KEY(LECTURE_ID) REFERENCES TB_LECTURE ON DELETE SET NULL
);
COMMENT ON COLUMN TB_ENROLLMENT.ENROLL_ID IS '수강기록 고유번호';
COMMENT ON COLUMN TB_ENROLLMENT.STUDENT_ID IS '수강생 ID';
COMMENT ON COLUMN TB_ENROLLMENT.LECTURE_ID IS '강의 ID';
COMMENT ON COLUMN TB_ENROLLMENT.ENROLL_DATE IS '수강 등록일';
COMMENT ON COLUMN TB_ENROLLMENT.STATUS IS '수강 상태';
COMMENT ON COLUMN TB_ENROLLMENT.GRADE_SCORE IS '성적 점수';

INSERT INTO TB_ENROLLMENT
VALUES (100, 10, 201, '25/08/07', 'N', 78);
INSERT INTO TB_ENROLLMENT
VALUES (101, 11, 202, '25/03/17', 'Y', 67);
INSERT INTO TB_ENROLLMENT
VALUES (102, 12, 203, '25/01/31', 'Y', 90);
INSERT INTO TB_ENROLLMENT
VALUES (103, 13, 204, '24/12/17', 'Y', 86);
INSERT INTO TB_ENROLLMENT
VALUES (104, 14, 205, '25/04/13', 'Y', 55);
INSERT INTO TB_ENROLLMENT
VALUES (105, 15, 201, '25/08/13', 'N', 12);
INSERT INTO TB_ENROLLMENT
VALUES (106, 16, 201, '25/08/11', 'Y', 80);
INSERT INTO TB_ENROLLMENT
VALUES (107, 1001, 203, '25/03/11', 'Y', 66);
